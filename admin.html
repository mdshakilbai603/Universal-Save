<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>‡¶∂‡¶æ‡¶ï‡¶ø‡¶≤ - ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</title>
    <style>
        body { font-family: sans-serif; background: #f8f9fa; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .section { margin-bottom: 40px; padding: 20px; border: 1px solid #eee; border-radius: 15px; }
        input { padding: 10px; margin: 5px; border-radius: 5px; border: 1px solid #ddd; width: 200px; }
        button { padding: 10px 20px; cursor: pointer; border-radius: 8px; border: none; font-weight: bold; }
        .btn-add { background: #28a745; color: white; }
        .btn-del { background: #dc3545; color: white; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 12px; border-bottom: 1px solid #eee; text-align: left; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Shakil's Control Center</h1>
        
        <div class="section">
            <h3>‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
            <input type="text" id="pName" placeholder="‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ">
            <input type="text" id="pPrice" placeholder="‡¶¶‡¶æ‡¶Æ (‡¶ü‡¶æ‡¶ï‡¶æ)">
            <input type="text" id="pImg" placeholder="‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï (URL)">
            <button class="btn-add" onclick="addProduct()">‡¶™‡¶£‡ßç‡¶Ø ‡¶õ‡¶æ‡ßú‡ßÅ‡¶®</button>
        </div>

        <div class="section">
            <h3>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡¶£‡ßç‡¶Ø‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
            <table id="pTable">
                <thead><tr><th>‡¶®‡¶æ‡¶Æ</th><th>‡¶¶‡¶æ‡¶Æ</th><th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th></tr></thead>
                <tbody id="pBody"></tbody>
            </table>
        </div>

        <div class="section" style="background: #fff3cd;">
            <h3>üõí ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
            <table id="oTable">
                <thead><tr><th>‡¶™‡¶£‡ßç‡¶Ø</th><th>‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶∞ ‡¶´‡ßã‡¶®</th></tr></thead>
                <tbody id="oBody"></tbody>
            </table>
        </div>
    </div>

    <script>
        async function loadAllData() {
            const res = await fetch('/api/data');
            const data = await res.json();
            
            // ‡¶™‡¶£‡ßç‡¶Ø ‡¶≤‡ßã‡¶°
            const pBody = document.getElementById('pBody');
            pBody.innerHTML = data.products.map(p => `
                <tr><td>${p.name}</td><td>${p.price} BDT</td>
                <td><button class="btn-del" onclick="deleteProduct(${p.id})">‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</button></td></tr>
            `).join('');

            // ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡ßã‡¶°
            const oBody = document.getElementById('oBody');
            oBody.innerHTML = data.orders.map(o => `
                <tr><td><b>${o.item}</b></td><td>${o.phone}</td></tr>
            `).join('');
        }

        async function addProduct() {
            const name = document.getElementById('pName').value;
            const price = document.getElementById('pPrice').value;
            const img = document.getElementById('pImg').value;
            await fetch('/api/add-product', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({name, price, img})
            });
            alert("‡¶™‡¶£‡ßç‡¶Ø‡¶ü‡¶ø ‡¶∏‡¶æ‡¶á‡¶ü‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
            loadAllData();
        }

        async function deleteProduct(id) {
            if(confirm("‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?")) {
                await fetch(`/api/delete-product/${id}`, { method: 'DELETE' });
                loadAllData();
            }
        }
        loadAllData();
        setInterval(loadAllData, 5000); // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶™‡¶∞ ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶¨‡ßá
    </script>
</body>
</html>
